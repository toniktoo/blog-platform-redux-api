(this["webpackJsonpblog-auth-api-formik"]=this["webpackJsonpblog-auth-api-formik"]||[]).push([[0],{10:function(e,t,a){e.exports={article:"ArticleInfo_article__QQkTN",articleProfile:"ArticleInfo_articleProfile__1IVVm",articleTitle:"ArticleInfo_articleTitle__1EjYj",articleSubtitle:"ArticleInfo_articleSubtitle__rspfW",bio:"ArticleInfo_bio__3lxWR",articleText:"ArticleInfo_articleText__2KvbF",textWrap:"ArticleInfo_textWrap__p9rA2",articleDate:"ArticleInfo_articleDate__33BLZ",articleBody:"ArticleInfo_articleBody__1VaMK",articleContent:"ArticleInfo_articleContent__1UmRo",tagList:"ArticleInfo_tagList__2RUcH",tag:"ArticleInfo_tag__1Bef2",footer:"ArticleInfo_footer__1AJL8",likes:"ArticleInfo_likes__2_0cm",lineUpFooter:"ArticleInfo_lineUpFooter__1Y7Am",footerLikes:"ArticleInfo_footerLikes__3S1BG",btnsWrap:"ArticleInfo_btnsWrap__258l5",btnDelete:"ArticleInfo_btnDelete__1n2pZ"}},109:function(e,t,a){e.exports={header:"Header_header__3kNPY",info:"Header_info__1gRFb",nameUser:"Header_nameUser__32lqn",linkUser:"Header_linkUser__1hCqs",linkUserText:"Header_linkUserText__bqqzf"}},201:function(e,t,a){e.exports=a(294)},207:function(e,t,a){},23:function(e,t,a){e.exports={formAuth:"Auth_formAuth__2gx4L",title:"Auth_title__1Kcj5",btnsWrap:"Auth_btnsWrap__1iG-V",successModal:"Auth_successModal__3ehlu"}},294:function(e,t,a){"use strict";a.r(t);var r,n,c=a(0),i=a.n(c),s=a(28),l=a.n(s),u=(a(206),a(207),a(13)),o=a(109),m=a.n(o),d=a(298),p=a(9),b=a(308),f=a(309),h=a(19),E=a(5),A=a.n(E),g=a(8),O=a(306),v=a(2),j=a(17),_=a.n(j),L="https://conduit.productionready.io/api",k={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},json:!0},S=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()(Object(v.a)(Object(v.a)({},k),{},{data:JSON.stringify(t),url:"".concat(L,"/users")}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()(Object(v.a)(Object(v.a)({},k),{},{data:JSON.stringify(t),url:"".concat(L,"/users/login")}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=a(176),y=a(177),w=a(304),U=a(296),T=a(297),I=a(307),R=Object(O.a)("ERROR_NETWORK"),C=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},F=function(){function e(t,a){Object(x.a)(this,e),this.timeNow=t,this.timeCreatedAt=a}return Object(y.a)(e,[{key:"getDay",value:function(){return Object(w.a)(this.timeNow,this.timeCreatedAt)}},{key:"getHours",value:function(){var e=Object(U.a)(this.timeNow,this.timeCreatedAt);return e%=24}},{key:"getMinutes",value:function(){var e=Object(T.a)(this.timeNow,this.timeCreatedAt);return e%=60}}]),e}(),W=function(e){var t=new F(new Date,Object(I.a)(e)),a=t.getDay(),r=t.getHours(),n=t.getMinutes(),c=function(e,t){return 0!==e?"".concat(e," ").concat(t):""};return 0===a&&0===r&&0===n?"now":"".concat(c(a,"days")," ").concat(c(r,"hours")," ").concat(c(n,"minutes")," ago")},V=function(e,t,a){"Network Error"===e.message&&(console.log(e),a(R({error:e}))),e.response.data.errors["email or password"]&&(t("email","email or password is invalid"),t("password","email or password is invalid"))},D=function(e,t,a){"Network Error"===e.message&&a(R({error:e}));var r=e.response.data.errors;for(var n in r)t(n.toString(),r[n][0])},G=Object(O.a)("USER_SIGNUP_REQUEST"),H=Object(O.a)("USER_SIGNUP_SUCCESS"),z=Object(O.a)("USER_SIGNUP_FAILURE"),P=Object(O.a)("USER_SIGNIN_REQUEST"),B=Object(O.a)("USER_SIGNIN_SUCCESS"),q=Object(O.a)("USER_SIGNIN_FAILURE"),J=Object(O.a)("LOG_OUT_PROFILE"),M=Object(O.a)("USER_FIRST_VALIDATE_REQUEST"),K=Object(O.a)("USER_FIRST_VALIDATE_SUCCESS"),Q=Object(O.a)("USER_FIRST_VALIDATE_FAILURE"),Y={home:"/",add:"/add","sign-in":"/sign-in","sign-up":"/sign-up","article-edit":"/articles/:slug/edit","article-info":"/articles/:slug"},Z=Object(p.b)((function(e){return{username:e.reducerAuth.currentUser.username,isAuth:e.reducerAuth.currentUser.isAuth}}))((function(e){var t=e.isAuth,a=e.dispatch,r=e.username,n=function(){var e;delete _.a.defaults.headers.common.Authorization,e="currentUser",localStorage.removeItem(e),a(J({isAuth:!1,isLoadingAuth:!1,name:null,token:null,isFirstValidate:!0}))};return i.a.createElement("div",{className:m.a.header},i.a.createElement(d.a,{orientation:"left",style:{minWidth:"0"}},"Blog"),i.a.createElement("div",{className:m.a.info},t||localStorage.currentUser?i.a.createElement(i.a.Fragment,null,i.a.createElement("h3",{className:m.a.nameUser},r),i.a.createElement(b.a,{style:{fontSize:"24px"},onClick:n})):i.a.createElement(h.b,{to:Y["sign-in"],className:m.a.linkUser},i.a.createElement("span",{className:m.a.linkUserText},"Sign in"),i.a.createElement(f.a,null))))})),$=a(23),X=a.n($),ee=a(35),te=a(305),ae=a(15),re=a(310),ne=a(311),ce=a(84),ie=function(e){return i.a.createElement("span",{style:{color:"red"}},e)},se=function(e){var t=e.name,a=Object(ce.a)(e,["name"]);return i.a.createElement("div",null,i.a.createElement(te.a.TextArea,Object.assign({name:t},a)),i.a.createElement(ee.a,{name:t},(function(e){return ie(e)})))},le=function(e){var t=e.name,a=Object(ce.a)(e,["name"]);return i.a.createElement("div",null,i.a.createElement(te.a,Object.assign({name:t},a)),i.a.createElement(ee.a,{name:t},(function(e){return ie(e)})))},ue=Object(p.b)((function(e){return{isLoadingAuth:e.reducerAuth.currentUser.isLoadingAuth}}),{signInAuth:function(e){var t=e.username,a=e.email,r=e.password,n=e.setFieldError;return function(){var e=Object(g.a)(A.a.mark((function e(c){var i,s,l,u,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(P({isLoadingAuth:!0})),e.prev=1,i={user:{email:a,password:r,username:t}},e.next=5,N(i);case 5:return s=e.sent,e.next=8,s.data.user.token;case 8:return l=e.sent,e.next=11,s.data.user.username;case 11:u=e.sent,C("currentUser",o={isAuth:!0,name:u,token:l,isLoadingAuth:!1}),c(B({currentUser:o,isFirstValidate:!0})),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),V(e.t0,n,c),c(q({isAuth:!1,isLoadingAuth:!1}));case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=ae.a().shape({email:ae.b().email("Not correct email").required("Enter email"),password:ae.b().required("Enter password")});return i.a.createElement("div",null,i.a.createElement(ee.d,{initialValues:{email:"toniktoo@gmail.com",password:"Swimm1998er"},validationSchema:function(){return t},onSubmit:function(t,a){var r=a.setFieldError,n=t.email,c=t.password;e.signInAuth({email:n,password:c,setFieldError:r})}},(function(t){return function(t){return e.isLoadingAuth?i.a.createElement("div",{className:X.a.loaderWrap},i.a.createElement(re.a,{style:{fontSize:40},spin:!0})):i.a.createElement("form",{onSubmit:t,className:X.a.formAuth},i.a.createElement("h1",{className:X.a.title},"Login"),i.a.createElement("hr",{className:X.a.lineBottomTitle}),i.a.createElement("label",null,"Email"),i.a.createElement(le,{name:"email",component:"input",placeholder:"enter email..."}),i.a.createElement("label",null,"Password"),i.a.createElement(le,{name:"password",type:"password",component:"input",placeholder:"enter password..."}),i.a.createElement("div",{className:X.a.btnsWrap},i.a.createElement(te.a,{type:"submit",value:"Sign in",style:{width:"100px"}}),i.a.createElement(h.b,{to:Y["sign-up"],className:"linkWithImageRigth"},i.a.createElement("span",{className:"linkWithImageRigthText"},"Registration"),i.a.createElement(ne.a,null))))}(t.handleSubmit)})))})),oe=Object(p.b)((function(e){return{isLoadingAuth:e.reducerAuth.currentUser.isLoadingAuth}}),{signUpAuth:function(e){var t=e.username,a=e.email,r=e.password,n=e.setFieldError;return function(){var e=Object(g.a)(A.a.mark((function e(c){var i,s,l,u,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(G({isLoadingAuth:!0})),e.prev=1,i={user:{email:a,password:r,username:t}},e.next=5,S(i);case 5:return s=e.sent,e.next=8,s.data.user.token;case 8:return l=e.sent,e.next=11,s.data.user.username;case 11:return u=e.sent,C("currentUser",o={isAuth:!0,name:u,token:l,isLoadingAuth:!1}),e.next=16,c(H({currentUser:o,isFirstValidate:!0}));case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),D(e.t0,n,c),c(z({isAuth:!1,isLoadingAuth:!1}));case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=ae.a().shape({username:ae.b().max(50,"no more than 50 characters").required("\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0438\u043c\u044f"),email:ae.b().email("Not correct email").required("Enter email"),password:ae.b().required("Enter password").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,"Password between 8 and 40 characters, at least one number and one capital letter")});return i.a.createElement("div",null,i.a.createElement(ee.d,{initialValues:{email:"toniktoo@mail.ru",password:"Swimm1998er",username:"toniktoo"},validationSchema:function(){return t},onSubmit:function(t,a){var r=a.setFieldError,n=t.email,c=t.password,i=t.username;e.signUpAuth({email:n,password:c,username:i,setFieldError:r})}},(function(t){return function(t){return e.isLoadingAuth?i.a.createElement("div",{className:X.a.loaderWrap},i.a.createElement(re.a,{style:{fontSize:40},spin:!0})):i.a.createElement("form",{onSubmit:t,className:X.a.formAuth},i.a.createElement("h1",{className:X.a.title},"Registration"),i.a.createElement("hr",{className:X.a.lineBottomTitle}),i.a.createElement("label",null,"Username"),i.a.createElement(le,{name:"username",component:"input",placeholder:"enter username..."}),i.a.createElement("label",null,"Email"),i.a.createElement(le,{name:"email",component:"input",placeholder:"enter email..."}),i.a.createElement("label",null,"Password"),i.a.createElement(le,{name:"password",type:"password",component:"input",placeholder:"enter password..."}),i.a.createElement("div",{className:X.a.btnsWrap},i.a.createElement(te.a,{type:"submit",value:"Sign in",style:{width:"100px"}}),i.a.createElement(h.b,{to:Y["sign-in"],className:"linkWithImageRigth"},i.a.createElement("span",{className:"linkWithImageRigthText"},"Login"),i.a.createElement(ne.a,null))))}(t.handleSubmit)})))})),me=a(77),de=a(65),pe=a.n(de),be=a(314),fe=a(300),he=a(303),Ee=a(312),Ae=a(313),ge=a(56),Oe=a.n(ge),ve=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"GET",url:"".concat(L,"/articles/").concat(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"POST",url:"".concat(L,"/articles"),data:JSON.stringify(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"POST",url:"".concat(L,"/articles/").concat(t,"/favorite")});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"DELETE",url:"".concat(L,"/articles/").concat(t,"/favorite")});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"GET",url:"".concat(L).concat(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"GET",url:"".concat(L).concat(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(g.a)(A.a.mark((function e(t,a,r){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"GET",url:"".concat(L,"/articles?limit=").concat(r,"&offset=").concat(10*(a-1)),headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Token ".concat(t)}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),xe=function(){var e=Object(g.a)(A.a.mark((function e(t,a){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"PUT",url:"".concat(L).concat(t),data:JSON.stringify(a)});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ye=function(){var e=Object(g.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"DELETE",url:"".concat(L).concat(t)});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(g.a)(A.a.mark((function e(t,a){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_()({method:"GET",url:"".concat(L,"/articles?limit=").concat(a,"&offset=").concat(10*(t-1))});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ue=a(134),Te=a.n(Ue),Ie=Object(O.a)("GET_ARTICLES_ALL_REQUEST"),Re=Object(O.a)("GET_ARTICLES_ALL_SUCCESS"),Ce=Object(O.a)("GET_ARTICLES_ALL_FAILURE"),Fe=Object(O.a)("ARTICLE_LIKE_REQUEST"),We=Object(O.a)("ARTICLE_LIKE_SUCCESS"),Ve=Object(O.a)("ARTICLE_LIKE_FAILURE"),De=Object(O.a)("ARTICLE_DISLIKE_REQUEST"),Ge=Object(O.a)("ARTICLE_DISLIKE_SUCCESS"),He=Object(O.a)("ARTICLE_DISLIKE_FAILURE"),ze=Object(O.a)("ARTICLE_REQUEST"),Pe=Object(O.a)("ARTICLE_SUCCESS"),Be=Object(O.a)("ARTICLE_FAILURE"),qe=function(e,t){return function(){var a=Object(g.a)(A.a.mark((function a(r){var n,c;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(ze({isLoadingArticles:!0})),a.prev=1,n=null,!t){a.next=9;break}return a.next=6,ke(e);case 6:n=a.sent,a.next=12;break;case 9:return a.next=11,Se(e);case 11:n=a.sent;case 12:c=n.data.article,r(Pe({isLoadingArticles:!1,article:c})),a.next=20;break;case 16:a.prev=16,a.t0=a.catch(1),"Network Error"===a.t0.message&&r(R({error:a.t0})),r(Be({isLoadingArticles:!1}));case 20:case"end":return a.stop()}}),a,null,[[1,16]])})));return function(e){return a.apply(this,arguments)}}()},Je=Object(p.b)(null,{toggleLikeArticle:function(e,t){return function(){var a=Object(g.a)(A.a.mark((function a(r){var n,c,i,s;return A.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=16;break}return r(De({isLoadingLike:!0})),a.prev=2,a.next=5,Le(t);case 5:n=a.sent,c=n.data.article,r(Ge({newArticle:c,slug:t,isLoadingLike:!1})),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),"Network Error"===a.t0.message&&r(R({error:a.t0})),r(He({isLoadingLike:!1}));case 14:a.next=30;break;case 16:return r(Fe()),a.prev=17,a.next=20,_e(t);case 20:i=a.sent,s=i.data.article,r(We({newArticle:s,slug:t})),a.next=30;break;case 25:return a.prev=25,a.t1=a.catch(17),"Network Error"===a.t1.message&&r(R({error:a.t1})),a.next=30,r(Ve());case 30:case"end":return a.stop()}}),a,null,[[2,10],[17,25]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.title,a=e.author,r=e.createdAt,n=e.tagList,c=e.favoritesCount,s=e.slug,l=e.favorited,u=e.toggleLikeArticle,o=e.isAuth,m=function(){var e=Object(g.a)(A.a.mark((function e(t){var a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ve(s);case 4:a=e.sent,r=a.data.article.favorited,u(r,s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("error component article ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),d=i.a.createElement("div",{style:{width:"200px"}},i.a.createElement("p",null,o?"like or dislike this article":"sign in to like this article"));return i.a.createElement(h.b,{to:"/articles/".concat(s),className:Oe.a.articleLinkWrap},i.a.createElement("div",{className:Oe.a.article},i.a.createElement("div",{className:Oe.a.contentWrap},i.a.createElement("span",{className:Oe.a.date},W(r)),i.a.createElement("h3",{className:Oe.a.title},t),i.a.createElement("div",{className:Oe.a.autorWrap},"Autor",i.a.createElement("span",{className:Oe.a.author},a.username)),i.a.createElement("div",null,i.a.createElement("div",{className:Oe.a.tags},"Tags:",n.map((function(e){return i.a.createElement("p",{key:e,className:Oe.a.tag},e)}))),i.a.createElement(he.a,{title:"Note",trigger:"hover",content:d,className:Oe.a.likes,onClick:m},l?i.a.createElement(Ee.a,null):i.a.createElement(Ae.a,null)," ".concat(c))))))})),Me=Object(p.b)((function(e){return{isLoadingArticles:e.reducerArticles.isLoadingArticles,articles:e.reducerArticles.articles,isAuth:e.reducerAuth.currentUser.isAuth,token:e.reducerAuth.currentUser.token,isFirstValidate:e.reducerAuth.currentUser.isFirstValidate}}),{getAllArticles:function(e,t,a,r){return function(){var n=Object(g.a)(A.a.mark((function n(c){var i,s;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c(Ie({isLoadingArticles:!0})),i=null,n.prev=2,console.log(e),!e){n.next=10;break}return n.next=7,Ne(t,a,r);case 7:i=n.sent,n.next=13;break;case 10:return n.next=12,we(a,r);case 12:i=n.sent;case 13:s=i.data.articles.map((function(e,t){return Object(v.a)({id:Object(Ue.uniqueId)()},e)})),c(Re({isLoadingArticles:!1,articles:s})),n.next=22;break;case 17:n.prev=17,n.t0=n.catch(2),console.log(n.t0),"Network Error"===n.t0.message&&c(R({error:n.t0})),c(Ce({isLoadingArticles:!1}));case 22:return n.abrupt("return",i.data.articlesCount);case 23:case"end":return n.stop()}}),n,null,[[2,17]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.isLoadingArticles,a=e.articles,r=e.getAllArticles,n=e.isAuth,s=e.token,l=e.isFirstValidate,u=Object(c.useState)(0),o=Object(me.a)(u,2),m=o[0],d=o[1],p=Object(c.useState)(1),b=Object(me.a)(p,2),f=b[0],E=b[1],O=Object(c.useState)(10),v=Object(me.a)(O,1)[0];Object(c.useEffect)((function(){l&&function(){var e=Object(g.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n,s,f,10);case 2:return t=e.sent,e.next=5,d(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n,f,r,s,l]);return i.a.createElement("div",{className:pe.a.home},i.a.createElement("div",{className:pe.a.articlesHeader},i.a.createElement("h2",{className:pe.a.articlesTitle},"Articles List:"),i.a.createElement(h.b,{to:Y.add,className:pe.a.articlesCreateLink},i.a.createElement("h3",{className:pe.a.articlesCreateLinkText},"Create article"),i.a.createElement(be.a,null))),i.a.createElement("div",{className:pe.a.articlesWrap},t?i.a.createElement("div",{className:pe.a.loaderWrap},i.a.createElement(re.a,{style:{fontSize:40}})):a.map((function(e){return i.a.createElement(Je,Object.assign({key:e.id},e,{token:s,isAuth:n}))}))),i.a.createElement("div",{className:pe.a.pagination},i.a.createElement(fe.a,{defaultCurrent:1,currentPage:f,total:m||10,pageSize:v,showSizeChanger:!1,onChange:function(e){return E(e)}})))})),Ke=function(){var e=Object(p.c)((function(e){return e.reducerErrors.errors}));return e?i.a.createElement("div",{className:"errorModalWrap"},i.a.createElement("div",{className:"errorModal"},i.a.createElement("h3",null,e))):null},Qe=function(){return i.a.createElement("div",{className:"successModal"},"Success!")},Ye=a(83),Ze=a(302),$e=ae.a().shape({title:ae.b().required(),description:ae.b().required(),body:ae.b().required(),tagList:ae.b()}),Xe=function(){var e=Object(g.a)(A.a.mark((function e(t,a){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={article:Object(v.a)(Object(v.a)({},t),{},{tagList:Object(Ye.a)(new Set(t.tagList.split(" ")))})},e.prev=1,e.next=4,je(r);case 4:setTimeout((function(){a(!1)}),1e3),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),et=Object(p.b)((function(e){return{}}))((function(){var e=Object(c.useState)(!1),t=Object(me.a)(e,2),a=t[0],r=t[1];return i.a.createElement("div",null,i.a.createElement(ee.d,{initialValues:{title:"",description:"",body:"",tagList:""},validationSchema:function(){return $e},onSubmit:function(e,t){var a=t.resetForm;Xe(e,r),a(),r(!0)}},(function(e){return function(e){return i.a.createElement("form",{onSubmit:e},i.a.createElement("div",{className:"form"},a?i.a.createElement(Qe,null):i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",{className:"title"},"Create article"),i.a.createElement("hr",{className:"lineTitle"}),i.a.createElement("span",null,"Title"),i.a.createElement(le,{name:"title",placeholder:"enter title..."}),i.a.createElement("span",null,"Description:"),i.a.createElement(le,{name:"description",placeholder:"enter description..."}),i.a.createElement("span",null,"Body:"),i.a.createElement(se,{name:"body",placeholder:"enter body..."}),i.a.createElement("span",null,"Tags:"),i.a.createElement(le,{name:"tagList",placeholder:"write tags with a space..."}),i.a.createElement(Ze.a,{type:"submit",value:"Create",style:{marginTop:"8px"}}))))}(e.handleSubmit)})))})),tt=a(10),at=a.n(tt),rt=a(299),nt=a(155),ct=a(315),it=a(316),st=Object(p.b)((function(e){return{article:e.reducerArticles.article,author:e.reducerArticles.article.author,isLoadingArticles:e.reducerArticles.isLoadingArticles,isAuth:e.reducerAuth.currentUser.isAuth,username:e.reducerAuth.currentUser.username,isFirstValidate:e.reducerAuth.currentUser.isFirstValidate}}),{getArticle:qe})((function(e){var t=e.username,a=e.isAuth,r=e.isFirstValidate,n=e.location,s=e.article,l=e.author,u=e.getArticle,o=e.isLoadingArticles,m=e.history,d=s.title,p=s.createdAt,b=s.updatedAt,f=s.description,E=s.body,A=s.tagList;Object(c.useEffect)((function(){var e=n.pathname;r&&u(e,a)}),[n,u,a,r]);var g=function(){var e=n.pathname;ye(e),m.goBack()};return i.a.createElement(i.a.Fragment,null,o?i.a.createElement("div",{className:at.a.loaderWrap},i.a.createElement(re.a,{style:{fontSize:40},spin:!0})):i.a.createElement("div",{className:at.a.article},i.a.createElement("div",{className:at.a.articleProfile},i.a.createElement(rt.a,{src:l.image,size:120}),i.a.createElement("h1",{className:at.a.articleTitle},"name: ",i.a.createElement("span",{className:at.a.textWrap},l.username)),i.a.createElement("span",{className:at.a.articleTitle},"bio: ",i.a.createElement("span",{className:at.a.textWrap},l.bio))),i.a.createElement("div",{className:at.a.articleContent},i.a.createElement("h1",{className:at.a.articleTitle},"title: ",i.a.createElement("span",{className:at.a.textWrap},d)),i.a.createElement("h2",{className:at.a.articleSubtitle},"description:"," ",i.a.createElement("span",{className:at.a.articleText},f)),i.a.createElement("span",{className:at.a.articleDate},"createdAt:"," ",i.a.createElement("span",{className:at.a.articleText},W(p))),i.a.createElement("span",{className:at.a.articleDate},"updatedAt:"," ",i.a.createElement("span",{className:at.a.articleText},W(b))),i.a.createElement("span",{className:at.a.articleBody},"body: ",i.a.createElement("span",{className:at.a.articleText},E)),i.a.createElement("span",{className:at.a.tagList},"tags:"," ",A.map((function(e){return i.a.createElement("p",{key:e,className:at.a.tag},e)}))),i.a.createElement("div",{className:at.a.lineUpFooter}),i.a.createElement("div",{className:at.a.footer},i.a.createElement("div",{className:at.a.btnsWrap},i.a.createElement(h.b,{to:"".concat(n.pathname,"/edit"),disabled:t!==l.username,className:"linkWithImgRigth"},i.a.createElement("span",{className:"linkWithImageRigthText"},"Edit"),i.a.createElement(ct.a,null)),i.a.createElement(nt.a,{type:"link",disabled:t!==l.username,className:at.a.btnDelete,onClick:g},i.a.createElement("span",null,"Delete"),i.a.createElement(it.a,null)))))))})),lt=Object(p.b)((function(e){return{isLoadingAuth:e.reducerAuth.currentUser.isLoadingAuth,isFirstValidate:e.reducerAuth.currentUser.isFirstValidate,token:e.reducerAuth.currentUser.token,isAuth:e.reducerAuth.currentUser.isAuth,isLoadingArticles:e.reducerArticles.isLoadingArticles,article:e.reducerArticles.article}}),{getArticle:qe})((function(e){var t=e.isLoadingArticles,a=e.article,r=e.token,n=e.isAuth,s=e.getArticle,l=e.isFirstValidate,o=a.title,m=a.description,d=a.body,p=a.tagList,b=Object(c.useState)(!1),f=Object(me.a)(b,2),h=f[0],E=f[1],A=Object(u.g)(),g=Object(u.h)("/articles/:slug");Object(c.useEffect)((function(){if(l){var e=g.url;s(e,n)}}),[n,s,l]);var O=ae.a().shape({title:ae.b(),description:ae.b(),body:ae.b(),tagList:ae.b()});return i.a.createElement("div",null,i.a.createElement(ee.d,{initialValues:{title:"",description:"",body:"",tagList:""},validationSchema:function(){return O},onSubmit:function(e){!function(e){var t=Te.a.omitBy(e,(function(e,t){return""===e})),a={article:Object(v.a)(Object(v.a)({},t),{},{tagList:Object(Ye.a)(new Set(e.tagList.split(" ")))})},n=window.location.pathname;n=g.url,xe(n,r,a),setTimeout((function(){E(!1),A.goBack()}),1e3)}(e),E(!0)}},(function(e){var a=e.handleSubmit;return i.a.createElement(i.a.Fragment,null,t?i.a.createElement("div",{className:X.a.loaderWrap},i.a.createElement(re.a,{style:{fontSize:40},spin:!0})):function(e){return i.a.createElement("form",{onSubmit:e,className:X.a.formAuth},h?i.a.createElement(Qe,null):i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{className:X.a.title},"Edit article"),i.a.createElement("hr",{className:X.a.lineBottomTitle}),i.a.createElement("label",null,"title"),i.a.createElement(le,{name:"title",component:"input",placeholder:o}),i.a.createElement("label",null,"description"),i.a.createElement(le,{name:"description",component:"input",placeholder:m}),i.a.createElement("label",null,"body"),i.a.createElement(le,{name:"body",component:"input",placeholder:d}),i.a.createElement("label",null,"tagList"),i.a.createElement(le,{name:"tagList",component:"input",placeholder:p}),i.a.createElement("div",{className:X.a.btnsWrap},i.a.createElement(te.a,{type:"submit",value:"Edit",style:{width:"100px"}}))))}(a))})))})),ut=Object(p.b)((function(e){return{isAuth:e.reducerAuth.currentUser.isAuth}}))((function(e){var t=e.component,a=e.isAuth,r=Object(ce.a)(e,["component","isAuth"]);return i.a.createElement(u.b,Object.assign({},r,{render:function(e){return a||localStorage.currentUser?i.a.createElement(t,e):i.a.createElement(u.a,{to:Y["sign-in"]})}}))})),ot=Object(p.b)((function(e){return{isAuth:e.reducerAuth.currentUser.isAuth}}))((function(e){var t=e.component,a=e.isAuth,r=Object(ce.a)(e,["component","isAuth"]);return i.a.createElement(u.b,Object.assign({},r,{render:function(e){return a?i.a.createElement(u.a,{to:Y.home}):i.a.createElement(t,e)}}))})),mt=Object(p.b)((function(e){return{isAuth:e.reducerAuth.currentUser.isAuth,token:e.reducerAuth.currentUser.token}}))((function(e){var t=e.dispatch,a=e.token,r=e.isAuth;return Object(c.useEffect)((function(){_.a.defaults.headers.post["Content-Type"]="application/json;charset=utf-8",r?_.a.defaults.headers.common.Authorization="Token ".concat(a):delete _.a.defaults.headers.common.Authorization}),[r,a]),Object(c.useEffect)((function(){if(t(M()),localStorage.currentUser){var e=(a="currentUser",JSON.parse(localStorage[a]));t(K({currentUser:e,isFirstValidate:!0}))}else t(Q({isFirstValidate:!0}));var a}),[t]),i.a.createElement("div",{className:"app"},i.a.createElement(Z,null),i.a.createElement("div",{className:"content"},i.a.createElement(u.d,null,i.a.createElement(u.b,{path:Y.home,exact:!0,component:Me}),i.a.createElement(ot,{path:Y["sign-in"],component:ue}),i.a.createElement(ot,{path:Y["sign-up"],component:oe}),i.a.createElement(ut,{path:Y.add,component:et}),i.a.createElement(ut,{path:Y["article-edit"],exact:!0,component:lt}),i.a.createElement(u.b,{path:Y["article-info"],exact:!0,component:st}),i.a.createElement(u.a,{to:Y.home}))),i.a.createElement(Ke,null))})),dt=a(66),pt=a(196),bt=a(197),ft=a(6),ht=a(301),Et=Object(ht.a)((r={},Object(ft.a)(r,G,(function(e,t){var a=t.payload.isLoadingAuth;return Object(v.a)(Object(v.a)({},e),{},{currentUser:Object(v.a)(Object(v.a)({},e.currentUser),{},{isLoadingAuth:a})})})),Object(ft.a)(r,H,(function(e,t){var a=t.payload,r=a.currentUser,n=a.isFirstValidate,c=r.isAuth,i=r.token,s=r.name,l=r.isLoadingAuth;return Object(v.a)(Object(v.a)({},e),{},{currentUser:{isAuth:c,username:s,token:i,isLoadingAuth:l,isFirstValidate:n}})})),Object(ft.a)(r,z,(function(e,t){var a=t.payload,r=a.isLoadingAuth,n=a.isAuth;return Object(v.a)(Object(v.a)({},e),{},{currentUser:Object(v.a)(Object(v.a)({},e.currentUser),{},{isLoadingAuth:r,isAuth:n})})})),Object(ft.a)(r,P,(function(e,t){var a=t.payload.isLoadingAuth;return Object(v.a)(Object(v.a)({},e),{},{currentUser:Object(v.a)(Object(v.a)({},e.currentUser),{},{isLoadingAuth:a})})})),Object(ft.a)(r,B,(function(e,t){var a=t.payload,r=a.currentUser,n=a.isFirstValidate,c=r.isAuth,i=r.token,s=r.name,l=r.isLoadingAuth;return Object(v.a)(Object(v.a)({},e),{},{currentUser:{isAuth:c,username:s,token:i,isLoadingAuth:l,isFirstValidate:n}})})),Object(ft.a)(r,q,(function(e,t){var a=t.payload,r=a.isLoadingAuth,n=a.isAuth;return Object(v.a)(Object(v.a)({},e),{},{currentUser:Object(v.a)(Object(v.a)({},e.currentUser),{},{isLoadingAuth:r,isAuth:n})})})),Object(ft.a)(r,J,(function(e,t){var a=t.payload,r=a.isAuth,n=a.isLoadingAuth,c=a.token,i=a.name,s=a.isFirstValidate;return Object(v.a)(Object(v.a)({},e),{},{currentUser:{isAuth:r,username:i,token:c,isLoadingAuth:n,isFirstValidate:s}})})),Object(ft.a)(r,M,(function(e,t){t.payload;return Object(v.a)({},e)})),Object(ft.a)(r,K,(function(e,t){var a=t.payload,r=a.currentUser,n=a.isFirstValidate,c=r.isAuth,i=r.token,s=r.name,l=r.isLoadingAuth;return Object(v.a)(Object(v.a)({},e),{},{currentUser:{isAuth:c,username:s,token:i,isLoadingAuth:l,isFirstValidate:n}})})),Object(ft.a)(r,Q,(function(e,t){var a=t.payload.isFirstValidate;return Object(v.a)(Object(v.a)({},e),{},{currentUser:Object(v.a)(Object(v.a)({},e.currentUser),{},{isFirstValidate:a})})})),r),{currentUser:{isAuth:!1,username:null,token:null,isLoadingAuth:!1,isFirstValidate:!1}}),At=Object(ht.a)(Object(ft.a)({},R,(function(e,t){var a=t.payload.error;return Object(v.a)(Object(v.a)({},e),{},{errors:a.message})})),{errors:null}),gt=Object(ht.a)((n={},Object(ft.a)(n,Ie,(function(e,t){var a=t.payload.isLoadingArticles;return Object(v.a)(Object(v.a)({},e),{},{isLoadingArticles:a})})),Object(ft.a)(n,Re,(function(e,t){var a=t.payload,r=a.isLoadingArticles,n=a.articles;return Object(v.a)(Object(v.a)({},e),{},{isLoadingArticles:r,articles:n})})),Object(ft.a)(n,Ce,(function(e,t){var a=t.payload.isLoadingArticles;return Object(v.a)(Object(v.a)({},e),{},{isLoadingArticles:a})})),Object(ft.a)(n,Fe,(function(e,t){t.payload;return Object(v.a)({},e)})),Object(ft.a)(n,We,(function(e,t){var a=t.payload,r=a.newArticle,n=a.slug,c=e.articles.map((function(e){return e.slug===n?Object(v.a)({id:e.id},r):e}));return Object(v.a)(Object(v.a)({},e),{},{articles:Object(Ye.a)(c)})})),Object(ft.a)(n,Ve,(function(e,t){t.payload;return Object(v.a)({},e)})),Object(ft.a)(n,De,(function(e,t){t.payload;return Object(v.a)({},e)})),Object(ft.a)(n,Ge,(function(e,t){var a=t.payload,r=a.newArticle,n=a.slug,c=e.articles.map((function(e){return e.slug===n?Object(v.a)({id:e.id},r):e}));return Object(v.a)(Object(v.a)({},e),{},{articles:Object(Ye.a)(c)})})),Object(ft.a)(n,He,(function(e,t){t.payload;return Object(v.a)({},e)})),Object(ft.a)(n,ze,(function(e,t){var a=t.payload.isLoadingArticles;return Object(v.a)(Object(v.a)({},e),{},{isLoadingArticles:a})})),Object(ft.a)(n,Pe,(function(e,t){var a=t.payload,r=a.isLoadingArticles,n=a.article;return Object(v.a)(Object(v.a)({},e),{},{isLoadingArticles:r,article:n})})),Object(ft.a)(n,Be,(function(e,t){var a=t.payload.isLoadingArticles;return Object(v.a)(Object(v.a)({},e),{},{isLoadingArticles:a})})),n),{articles:[],isLoadingArticles:!1,article:{title:"",createdAt:"",updatedAt:"",description:"",body:"",tagList:[],favorited:!1,favoritesCount:"",author:{username:"",bio:"",image:""}}}),Ot=Object(dt.combineReducers)({reducerAuth:Et,reducerErrors:At,reducerArticles:gt}),vt=Object(dt.createStore)(Ot,Object(pt.composeWithDevTools)(Object(dt.applyMiddleware)(bt.a)));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p.a,{store:vt},i.a.createElement(h.a,null,i.a.createElement(mt,null)))),document.getElementById("root"))},56:function(e,t,a){e.exports={articleLinkWrap:"Article_articleLinkWrap__2_I1y",article:"Article_article__3xUIu",date:"Article_date__2AFnp",title:"Article_title__30J-0",titleLink:"Article_titleLink__2nVax",autorWrap:"Article_autorWrap__JuHLG",author:"Article_author__q-TJr",likes:"Article_likes__17Ac7",tags:"Article_tags__3Zo83",tag:"Article_tag__15Y32"}},65:function(e,t,a){e.exports={home:"Home_home__TW--p",articlesWrap:"Home_articlesWrap__1eYM4",articlesCreateLink:"Home_articlesCreateLink__28exH",articlesCreateLinkText:"Home_articlesCreateLinkText__wJfmo",loaderWrap:"Home_loaderWrap__24y6Y",pagination:"Home_pagination__3S31Y"}}},[[201,1,2]]]);
//# sourceMappingURL=main.3969ea6b.chunk.js.map